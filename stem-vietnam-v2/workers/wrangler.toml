name = "stem-vietnam-api"
main = "src/index.ts"
compatibility_date = "2024-12-30"

[vars]
# Chú thích: Token budget cho mỗi request
MAX_TOKEN_BUDGET = "50000"

# Vertex AI Configuration
VERTEX_PROJECT_ID = "voltaic-syntax-482104-b7"
VERTEX_LOCATION = "us-central1"
# Fallback region
VERTEX_LOCATION_FALLBACK = "us-east1"

# Chú thích: Môi trường development
[env.dev]
vars = { CORS_ORIGIN = "http://localhost:5173" }

# Chú thích: Môi trường production
[env.production]
vars = { CORS_ORIGIN = "https://stem-vietnam.pages.dev" }

# ============================================
# Secrets (set via wrangler secret put)
# ============================================
# 
# VERTEX_CLIENT_EMAIL: Email của service account
# npx wrangler secret put VERTEX_CLIENT_EMAIL
# Ví dụ: your-service-account@project.iam.gserviceaccount.com
#
# VERTEX_PRIVATE_KEY: Private key từ file JSON (bao gồm -----BEGIN/END-----)
# npx wrangler secret put VERTEX_PRIVATE_KEY
# Ví dụ: -----BEGIN PRIVATE KEY-----\nMIIE...\n-----END PRIVATE KEY-----
#
# VERTEX_PRIVATE_KEY_ID: (optional) Key ID từ file JSON
# npx wrangler secret put VERTEX_PRIVATE_KEY_ID

# JWT Secret for auth
# npx wrangler secret put JWT_SECRET

# ============================================
# D1 Database
# ============================================
[[d1_databases]]
binding = "DB"
database_name = "stem-vietnam-db"
database_id = "976ec8f9-bf7a-411a-a3d8-856b05e71a20"

