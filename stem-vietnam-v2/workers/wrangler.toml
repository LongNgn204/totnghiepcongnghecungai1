name = "stem-vietnam-api"
main = "src/index.ts"
compatibility_date = "2024-12-30"

[vars]
# Chú thích: Token budget cho mỗi request
MAX_TOKEN_BUDGET = "50000"

# Vertex AI Configuration
# OpenRouter Configuration
# OPENROUTER_API_KEY: "via secret"
# npx wrangler secret put OPENROUTER_API_KEY

# Vertex Auth (Deprecated, kept if needed for legacy features like Drive ingestion)
VERTEX_PROJECT_ID = "voltaic-syntax-482104-b7" # Keep for RAG compat until fully refactored

# JWT Secret for auth
# npx wrangler secret put JWT_SECRET

# ============================================
# D1 Database
# ============================================
[[d1_databases]]
binding = "DB"
database_name = "stem-vietnam-db"
database_id = "976ec8f9-bf7a-411a-a3d8-856b05e71a20"

# ============================================
# Vectorize (RAG Pipeline)
# ============================================
[[vectorize]]
binding = "VECTORIZE"
index_name = "stem-vietnam-rag"
